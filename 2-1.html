<html>
<head>
<title>????</title>
<meta charset="utf-8"/>
<script type="text/javascript" src="aes.js"></script>
<script type="text/javascript" src="scrypt.js"></script>
<script type="text/javascript" src="buffer.js"></script>
<script type="text/javascript" src="setImmediate.js"></script>
<script type="text/javascript" src="unorm.js"></script>
<style type="text/css">
body, html, iframe {width: 100%; height: 100%; margin: 0; padding: 0}
iframe { border: 0; }
#auth { position: absolute; top: 50%; left: 50%; z-index: 5; background: white; }
#auth_inner { 
    position: relative; left: -50%; top: -50%; border: dotted black 1px; background: white;
}
#progress { position: absolute; top: 50%; left: 50%; z-index: 2; background: white; }
#progress_txt { 
    position: relative; left: -50%; top: -50%; border: dotted black 1px; background: white;
}
td { padding: 5px; }
form { margin-block-end: 0; }
</style>


<!-- hi!  if you're reading this source code, there's not too much 
    interesting here (by design...).  If I put anything interesting in 
    the comments, it will go in the encrypted file, which will be a bit 
    more involved to access from the developer tools -->
</head>
<body>

<iframe id="wrap" src="javascript:void(0);"></iframe>

<div id="auth">
    <div id="auth_inner">
    <form onsubmit="return false;">
        <table>
            <tr>
                <td>Key</td>
                <td>
                    <input id="key"/>
                </td>
            <tr><td>&nbsp;</td>
                <td>
                    <button id="click">Unlock</button>
                </td>
            </tr>
        </table>
    </form>
    </div>
</div>

<div id="progress">
    <p id="progress_txt">Starting</p>
</div>

<script type="text/javascript">
const enc_html="7d2cc477b8053b8eaa7581220139a27444f519b992671d3941525758e8c58485220b7781b8db8019f2c01adf0167277d68b9a74b6273c1eacfce21d4283b32ad25e42559c7b9f20788ead4aa33302d6e7bf05920960ea1fe22976a99b5de1f1b9e65a5864a13b0d13efa0f216e5edc3e044359b3aa18adc8e293c83869ae4ced3ac9d157ea2b148d6f6f2e6c2ecb4d32877a9efcd52d3467edcdfb468ef3d1652def5efbe480a23d28d63f5f1f5eb547ea0e64d6248590c8f22ded5ca76611a47f1cfe417f3ec68968b6fb2aded35bd25477dca633427ca5e40ef4b75ca9cd414fa3081b82a7704d7462941403cc3739bae1a30742d6d826b79f82dafd3fb7f8bd368fafde2ac58951efaa0456185d2f97914d2377ac9852f816ec4ce08e3032116d2b1273e0d5e74ca4ce569d1f211c7e4211055d4aabb2971afa226cdb1bd4fa6757e24343f022500e186b4841845e754eafa492a77e7af7fe8f356683765f1164064f33a970b689eb1c0d200782dd10a2d7a46a9ee2938ca02f371e6dacedd766fccb8047c62cbd827909429f0c4cff43736af8083d309e59ba53aa1771c0fe7dfe71cd72f3904e758142fe075bdf686288c1eb512b1a81417cffed084187bdabbd20f8d01a15888c86c87208f7d807c3d6ab3c6c11023a1951acf739f3e4f722dd2b0f4420fd2c0fc1627ec58e909239adb26c5a352bcb95537cacb2345c5de970c106a04d8b06ad9325d50c6949f4649544b6ffa0a30c20d1cf7eb18c3d08517cabf1337bd685d8e03b87d75e9fbeb74553b029a0a8ffc1a5615cb0e53ccc6e36383fd41353743f3cf1419443d3d3cd3e5b870e5f945144512f02e870e77534c6952f16d75f5c455b73f0450e4c13ea6685193a0e695c1762036a37beedfbcf899b0c89a47b2e9ed4361edf2ee736f1ac54e2762fe726fdb9de9ba191dde2529329f8e705d9e45d1fe19d0546f794367af11c6a400778c13459d2d3767283ae26adc8a05871553a984005c0cba666b8871b5852cc90c1f2facc1522311288f4d9372b518895ba55d355aceead5b92c43733a857fe1ab4d7b70f5a6fdf03037d6df5e85511c73683344bae81dd7951ff0a99d7c557adea0db8586906ef53e14b6499c3e05bb11a95374906ec001e135befc7739760ec640214bec481356c35e58f7911d1b523597e8d5ce480d1a20172027512092cc917287bc46d33269e8ff8d6cbf808b702dda43be539fa21b90910a00df206ff6ff01220329b2ee6a5551b6492e19903f3c9014ad7554015ef61e5b29644202ae6b3f6f9fd1bce3b5f6c9acf8c10bbdbce02c2c004bbc2cbfa17446d59a644b84d33bea0e67151cf38d38da4de34c8ba9064196bfe0f51152e74fc83b062de941fdefcf006e37c1f4459a5932b32769e93a10624a0ab6b38906abee7cbc28686bcfd3335885c4c6fee480a3d250bbf3938ca2a9a577c6d159c47e48f5c63e37d4849cd44df084f4daf44a1c7af033897293e6491cc0f4aac3e2d1eb31903ec06b10876516a0aae4b88b8b449890338df2a41dae1b2de167442bd55b80ff1e47829e35b60037f495ee7437fe0065bb313c9f03318c0a822c644a5f2b9a99098b5ee14ed3d8f315e7a681b783e6cdb92bc7096563c6580ecf09d1d45ebcfac2eb06034bbe6cc351b67a3bf11213d25767ad26feea6680cc0e58fd03d6255a43b275f301705c44313c07621fb10e95635e2be3c4ec77510b057c7ade214f1d545a18a77ef6ac3399bebe21cee0cf90bd3e4f5ad74c8f4a1b761afe02ab764d6555dea056ad6c6f222d0391cd89750fb605b18c70654cb7fca044ae9f767b8f75b6958f5ee912e177c6198f82b3e4bc96af707e661ce627acb135deae9e6014e44a54186781b7f654fb465ee7e6742c26adf703daf69fdc106f09b3b60bd5fb5e747c135a4816f178db1febe6f4d50da44f0c8b362f02e8542618c49389da6f7aa4ec1b75033db0b1d83bcfe348464dd87666fca5483fdff0a91bcfe37aa8fa844e3c0d3bb8fcf9b0e8c39a5cea1ad1670bd87093b19188fd52603d2efbe6add5ec90691fe99831ca89e3ec526f3117488e3107c1513a893622f97b5ce81c593d39fb93333236d65fe2ff80ba4f12243d08ee3941cc177ec5c3ec3757b1058297ac4a87e682c15fcd056bc9641a41217939b6a86f99cf6cf9127b11afb46ebe01fd96bc3c28e2a5929fc024cd5746d0cb184ec235753be846a89bfeca5f0cb86bcd3c96d6ee9783cd659be018e3056f38bc1bea1ebc9b6839415ff985b2d7da6a9dbf8a997c4af734ca15945d9702b7fabd80add91d1a62f10defdfdb29b492b28a25facc47b6e5673e583286d2ae6aa54df9d9c406d7b35401ded65599f6022ab1607326d6e4e1010a2fd15306d5ff67bd246d51fa18f419f04b28d7b63d29271e97963c659d67f70762c94403521bb8f3dea2e6cb5b0d7da5486a4f29c84c96d5ddb5e1c36c4390b216024d9af44b327bdb400999c3baf1672eca7ff6e5388a1e11d7c1df823cbf6291381a24cf992e88ba583784e7377e10137858d92b39cb0c672517822132534c1d5590eec18a9eea81a924d45743a012916e7c067c22c8edd927cd6affc88764925247fc24fe460577cfa82c9649332fcc4113118ec8b0845275c9fc9c1e9355d5f71fc02ea33a28abe6333861e8639248409193aa551a6d01571a651581adda7bb756fbc75c024ea260d6e682c4cf8c8068610b3ac7683bae2988fcf279ca3b3c8c2e1baedda779e0956bf72391f88a8f7effe528e8bdd74ee6cda925ca8212332d79be2d49a225fcd1ec40e705e59fb979fc4e85daa60f08b51b12358b20b68654b53ea2cf882da7cb5adf114cb89b091fb041c5ff3a87fcae51c817975791944ea958d0fc873321f7258d0353b11bfb6553ce9320f69bc67769f994ca92c13219c983f85879d21a0bc452dd6e616175ff86f92784049502fc21b743afa2316d68da12691dae772d08d65167292425f42f1601271b9e3967f8700726743b62c1370870b7daacc60510f5955c215e1411a365fabbe6a44f58efc0a95c2533b73969f9c95e3f3380c30db96d3c42b7e3e2d4068cc0a772f51d0cfc8e9b4c39584132ffb4f0223f95402849a4517e20321136e6fadc9dc1073f3161e9861c7c57ecfe998e463ecb227b1a7b459fbc687d89d9bdfa2d87d5ba95e30d7b72537d2c88254d4c32b0c3df0c58112cc10e0c0a5cc147f6464f1dbefe70e4ca55ff411deb9b09e7c298dabb58bb11fd5e89972d3a8298fc0b6ab1fbab5941726d1a9091600544d998dc887cf501493d6777b61554ca17eb98654929d26706874d74408bcb3e6ee9ad8f00abe2fc3a2278cde45e0eb1d3abbae30396a9889dfa7a682d814cc8c581721387bd0ff3e83225d1b78457dcd3a0ba5078e3cf78d90eaa54ff9ce792f91cd7f5d23116615107f5fabc7a73956c55946f210227819aa0df8f2e60caf7493b9252ec20f17dbb5c295b781211dfb97dc70febef6d98d384b7b3667d13c200ead205a8bbf6b1f89705befbc4db96e7a643884e924c45e06f7de5edfc4cfb2a3f4d90d9d494a8a71cc4d240f0df68f5a880c9ba52739ccff0ef47d77337643699ae3177f5040efe4dd9d78e826212f8422b2cff8664fb4f6f6f22537eaf629585f1a8835faccf821e39b0742b92aaca2fa8f589657f4b8d4ba3dd25e6cb8a24ce141b340edb4d57146f3296460918291df5e23c867e8bbfb861c0b5e1e9bdbbb289d4fea62b86f8a4dafb19798eb0c2801e89faf5312b589cc206ec69f2418683dac5e074a2e017b16c782fd12c7daf19100d37cbd1c631b38f9b9f10698ae2d2d0850f463c2fda22e7ff6fdd98c7bc48034801cfeb482f9d22143a335509003cbcc6d4f2d51064658c6f022566290a11f2d2c0c0be68f4b7b1f80bd9840dce2cd9b21d16bd3997a6d1604a7b271ecc1c10a83d26d1c92ad7af6f2aa3729ea4a3fd3e1cd1748f0dddbcff66d1921d9447b5df0e5060798d376580b308def7ba760bb2ea5b0e342af31cfa93b50aa80a6ab60082e64d520c956527c040bb533f10087168e68df6e899645170c267dd31502dbd92fdd009db4ba4b3102c0bd317012dacb93625aaedb38e1083cec4f6abab3282867dcdc72c0dce4b23fbf8d1d0cc462c4bd2e77e94e3eb988ff827c3413a22eaf187bce1017c3cab392e9a4880c42a60a7fae2a634d96753cb081a5b79f771fcdbb58239260d14f931321117438b42f40737f9d612543b8c2ac769ed31f488a9627193a4cad9ed7cd40c4b5c92ee639aadd7cd984f8fee6527740deef16faa7d2aacfadf4a8fdbb9db0a304b97e81e8579903c6344d1580b74d9fd4669a69042c60afc34360e95ae5b3573ecb4f7b9c61ea9828dc5f7c9c1d12a71720b6a6b55066c9eee0990047eaede8490e20a92fc0930b3ba3a2ed0ea6f963f72474e980e566f2eb710564c1d8d30e6c7d5110b292689ec67d494d18762a2c3767cd38a4bcfe57f5204c7aa82a07ff8b0708c7fc31a7ca0e6557a26bda7e4cd38ca137cc7e232e2530c1e5980238a6ef4fef8fc8d576467ec72dee8b38702a8aa5507513edc857aed6cdfb88d82230adb46c9869ea839d39546683e30fb796957301c7262a4d29956ce8d155a08743de42ad53c3146ac4091152d055ed67b21de425df9e07f230c60e27e50990d60847e655d64f1e2bea01e1cfeb12c7a64e6618208f6e222464d2af36eb74effcd978cb6b44142167f5282b6ea3c3d782ec32eb54492d656b53c01912a13cbf39e88d6a1151fca240a3aef5093216a099bd0d505ea52a9748c8946126cbaeb7d78d3889fd6f7ca8670fd81916c74da3ead7c05331e97237222fad71a8da26536ab7d3e1126108d278a7067fd696d5eca634ebe375191d8b82866370957db337668e517c765c2c38bd4b4af48f320371e42a28f083312627871ac2e2de8534ed2277e413636823b1915fefc45d31b57c4646af7eb10542fe195f8d62739a3bbf3a28ff5d9f7a23d4a8ecfa503badf3aa4d6092fcdcf545db577d440455c9bb16885ab4907855938c2e766eb7c54e6e3c38c0800ffd046ecfef206dafd4376df3b29aae4a18ae129f8839fbb57b81032da71f49c1cc900ffcf7d790c2610dab6f5d845d18f48f7f2eac2f88762e62be470c38fdce5f0babce3cbe42ca61c8cdd06e3737b5275922b5c77a2e83c7f1b6fed5dfd47228359776ca20fe9ae837b24dc23a2e205e0219178be729f27e991b04e79d37337599d482763868960366a6f035f04ac22253ea1ab19de16575b12b64983c5cad5326c2d9dbd042c3112a62baff3e48c357813bb55d6c294d317591a386775a0fd854951126b12295f544928e22d8fc8eb53be2aa140cc9a79e492a964957561f2f79da9b77f7c8bdd8f15a1af02949813148b179980b357521ae2ed838156025e4e4eaa91233897e8f19d843f3c6f6dbabc70d078df917d05eaab08c2fd10af7029ff202ebe6226639c5e6527bbec875be04e8aefc8d5aa96e9b0ada26796d36708840bf76a8215df7c0eda296d1306b80d901482b724f3e1668d91e3c3b449722f1bdbc8702c86883e5f30496c3e4ee2b9a3fe45d78d82459c040bc0e8937e0d52d8f607e9296e3310e3ce763b198b655499310bcd64c108ce1a110662363ad9033afc4cf4494f84d492b1b3951b6b24a1148a7e09af093dcc8f4dc39888bf533c973fe1c71ebdc5732b415e69bfa2c80046e6dcd45b41f4570d6a4a15dc77ab44b4cd0b89c13b3c0b113d7ea8eb81a6577e0e23145abac8ed8fbb79148aae1812c0c80aceb7907a8027ad37998c1a7c7e76e0e57ae0229fcdb42a2f4f95e07069960564e9aa9550d5a72bece601bdec7aa70355f18f8b97abb65b8fba0d5e40a4ab48a21dc0fb4a0b158fbee878c7db2a35517a6c5eb6d153b7e6cbc779f26577ad2e5e0d73b9cc7f1585007c7508df4100872b85f1a2588bdc6790ba7e28eb1d0e01fb7185d9785d93eb315bf19eafccff555d901a46dfb1e0761a290d8c40473638fc7e0bfc240b5edbcbcc235f0a27fb48a7063f28dac5db9a074f9539733f179ea3bc10c490595469e4fce91499de5d3ff2d250a9b02c7f1a999d71ebca93e793c5745db1fdaf2de5bbeca526095c4fbfda93279ced3138b477810b80fc50ae4ab7741435d97beaf4e0a0e0d16289d1dfd7383a1692ef9d0f989b2bd6dc3c83a195e55acda4333144293c97da96d315a27da50003b73855ba0b8f0ac5ea78e897893c69619dbad7c5e1cb723f0fbdcacb64994bc4e3959c42262576b58010a581c79dd34e8531140bb8027dbb2d389c78add9463c5678f119df6d36d368f1ab1c586c8abbc53784de9c656c84dd5e5e347884231cd14c9da0524a6c4d88797daec065babde9e79122350fd1da6c0502c35a865105b640f1364c85c380879d6c9d4d95afe19dffd3f548caecca2020fd6511cbf45a61d726636140b4e439d43d393f6d0ba9d1b6ceb4af845ed015032c00cbe2be733056d6dfe1529307dc9493ba5ae64312b8c687d1b0b7d4a0827e3b926cfb9445d7277e2340637fae9745cb4cccce6732720952850ad4efdd43567adaf0080303b30305d79545a8c3606f0d4bb900409b1641df46d738f8af1f838977423d76228cc136d8dd8dbb527aa042b8449a982c242f8ea6ca7c5e7f674080e7e851c5232d1caab918e4f4462aaf29fc21fc3b786b3be0fc59b38cc502e3befe25da644e672a89b6f4ff3dc9077e7942a85f20e768fa6995d658c3b899f48c430e4120036f7b652e2ea5808ecbbe6448304d1e9c740aa5cca09f783bfb527890896935cee085d00ba2c430e59dc2b8315ce6755d709b367236710e494525338561fc6b64ede4de13293b93cf8434227dfc6fa173c5eb24f9ef8870eaddab22acea9243e3f8b6c2a110d3a92aa5e1649730e5106c5dca421ec8e98acc3e898581a43fc9c7b539a6f98ccdd0e81fbe9abff7ceb82f56070d9073c859956dab6ced5ff143bee661d48ddded75e09d06826574d762d3777a0e2016c10772259fa7100ab32f907e455bfb83c2f13611c8e74e1f179661c340999342efb23854e2784d677f13aee9e7d57463825d79ab3a65d7c1b73c9d543ecda132dc380303c5177bd290b191055468fa951b706bc70fec95ca28cb086fbb3b35a47199a69e45d7488e14a78b3034e1c48c4da601a0a7efbc4a9a226932973fc89a0a8cdce941e92f68a2f8e5fb7015ec21165fe909477926ca9416eb3ee13818947591205e3463073a52264d6e89e0cae9da78420261572550267983cc7b62525726b38d2b69b83387f9828252827825938292c7ba57cdec559cbb467102047c935bb428aa3e4dcdc61ba796a536717135de6faf0d2a3bc160eefaca1f2e52ee9eefb1c60aa8f0c72d52617047a214f68985fd9e7ea7acd71a5fa3f874530548431bc338ae120d19db2ec18cdddc5f30965945c3d2797c330533c2e733abe8290f489776ac5e8270233583eccb1a19348bdb2d40243b8f4fcbb1c955b2554d50bd3c07625f8ddf5b26d060d5e0cbae04ac5c1d540811b468245fc938344f851e8c7af2ec3394b9d0c0541c471e646d99402bd21c7750fc9bd05eaa3e3f8116a03bb722479a2d25c0bd80050e5436d840a0a323c3e54bc22407fbdd32ed77d6d95093622968dda01adc761d8f210c4af100a6517c0cc70bac479069d5b0db1f2dae231cc3cfcd34112bb5aef1b5b29ff78bd2bf90c087f3104ecb048c15d0937e43bc88e";
</script>

<script type="text/javascript">


function replaceIframeContent(iframeElement, newHTML)
{
    //iframeElement.src = "about:blank";
    iframeElement.contentWindow.document.open();
    iframeElement.contentWindow.document.write(newHTML);
    iframeElement.contentWindow.document.close();
}

function scryptProgress(progress) {
    console.log(progress);
    document.getElementById("progress_txt").innerHTML = "Deriving Key "+(progress*100).toFixed(0)+"%";
}

function unlockClick() {
    const usePasswd = true;
    document.getElementById('auth').style.visibility = 'hidden';
    if (usePasswd) { getKey(); }
    else {
        var key_hex = document.getElementById('key').value.trim();
        var key = aesjs.utils.hex.toBytes(key_hex);
        decrypt(key);
    }
}


function getKey() {
    const password = new buffer.SlowBuffer(document.getElementById('key').value.trim().normalize('NFKC'));
    const salt = new buffer.SlowBuffer("notveryhelpful".normalize('NFKC'));
    const N = 16384, r = 8, p = 1, dkLen = 32;
    const keyPromise = scrypt.scrypt(password, salt, N, r, p, dkLen, scryptProgress);
    keyPromise.then(function(key) {
        console.log("Derived Key (async): ", key);
        decrypt(key);
    });
}

// testing password password
// testing key f52ffec084851c44c02cb6085162da8a89c0046582845a27d56ee1f848dc2362
function decrypt(key) {
    console.log("decrypting");
    document.getElementById("progress_txt").innerHTML = "Decrypting Content";
    var iv = aesjs.utils.hex.toBytes("2a52f967a0b964a283f675542d380d6d");

    var bytesEnc = aesjs.utils.hex.toBytes(enc_html);
    var aesCbc = new aesjs.ModeOfOperation.cbc(key, iv);
    var decryptedBytes = aesCbc.decrypt(bytesEnc);
    var decryptedPage = aesjs.utils.utf8.fromBytes(decryptedBytes);
    //document.getElementById('wrap').src = "data:text/html;charset=utf-8," + escape(decryptedPage);
    //document.getElementById('wrap').innerHTML = decryptedPage;
    //$("#wrap").contents().find('html').html(decryptedPage);
    console.log(decryptedPage);
    replaceIframeContent(document.getElementById('wrap'), decryptedPage);
    document.getElementById('progress').style.visibility = 'hidden';
}
document.getElementById('click').onclick = unlockClick;
</script>

</body>
